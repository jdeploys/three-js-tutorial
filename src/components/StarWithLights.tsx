import { PointsProps, useFrame } from "@react-three/fiber";
import { useRef, useState } from "react";
import { random } from "maath";
import { Sparkles } from "@react-three/drei";

export function StarWithLights(props: PointsProps) {
  const ref = useRef<any>(null);
  const ref2 = useRef<any>(null);
  const [sphere] = useState(() =>
    random.inSphere(new Float32Array(5000), { radius: 1.5 }),
  );
  useFrame((state, delta) => {
    if (!ref.current) {
      return;
    }
    ref.current.rotation.x -= delta / 10;
    ref.current.rotation.y -= delta / 15;
    if (ref2.current.size >= 0.005) {
      ref.current.size = 0.002;
      return;
    }
    ref2.current.size += delta / 10000;
  });
  return (
    <group rotation={[0, 0, Math.PI / 4]}>
      <Sparkles
        color="orange"
        count={100}
        noise={1}
        opacity={1}
        size={
          (0.34012898802757263,
          2.515265941619873,
          3.9858129024505615,
          1.1218860149383545,
          0.09945329278707504,
          0.9782130122184753,
          0.17910078167915344,
          3.952826738357544,
          0.15616582334041595,
          2.5530006885528564,
          4.59066915512085,
          1.4620728492736816,
          3.418883800506592,
          0.389962762594223,
          2.750347375869751,
          4.545610427856445,
          1.4550305604934692,
          1.2510185241699219,
          3.592308521270752,
          2.4673619270324707,
          2.424797296524048,
          2.1813907623291016,
          1.1806000471115112,
          1.5181667804718018,
          3.4103732109069824,
          2.709991693496704,
          0.6764703989028931,
          3.8266823291778564,
          3.6686577796936035,
          2.0914669036865234,
          3.6665918827056885,
          2.7179975509643555,
          0.017062537372112274,
          4.663322925567627,
          3.4318573474884033,
          4.715874671936035,
          2.3532307147979736,
          0.6510059237480164,
          2.4962003231048584,
          1.0297890901565552,
          4.804549217224121,
          0.9818726181983948,
          4.701260089874268,
          1.9585338830947876,
          1.562915325164795,
          4.24229621887207,
          1.4419232606887817,
          3.787389039993286,
          0.607694149017334,
          1.5466848611831665,
          4.472994804382324,
          4.575090408325195,
          4.067991256713867,
          2.45723032951355,
          0.7382431626319885,
          2.525559663772583,
          4.533237457275391,
          1.7782447338104248,
          2.3021113872528076,
          4.434121608734131,
          1.704383373260498,
          1.212644338607788,
          0.30448222160339355,
          2.5048904418945312,
          3.788597822189331,
          2.050495147705078,
          3.0050606727600098,
          1.133711814880371,
          2.696077346801758,
          2.4084668159484863,
          2.836078643798828,
          4.690698623657227,
          3.2213292121887207,
          2.333635091781616,
          1.643700361251831,
          2.046710968017578,
          2.3340494632720947,
          3.9905929565429688,
          4.572452545166016,
          4.847021102905273,
          1.3365187644958496,
          3.0088555812835693,
          4.804627895355225,
          2.8532330989837646,
          1.961284875869751,
          3.5978598594665527,
          0.6591391563415527,
          4.562160491943359,
          3.6262073516845703,
          3.223522186279297,
          0.5309432744979858,
          1.2681102752685547,
          4.676329135894775,
          2.945655107498169,
          0.3544178009033203,
          1.6426585912704468,
          3.26810359954834,
          1.7074379920959473,
          4.517094612121582,
          1.397750973701477)
        }
        speed={0.3}
      />
    </group>
  );
}
